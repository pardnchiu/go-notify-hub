# Update Log

> Generated: 2026-01-21 08:00 (+00:00)
> v0.7.2 → v0.8.0

## Recommended Commit Message

feat: add Discord bot with slash command support and refactor LINE Bot module structure
<details>
<summary>翻譯</summary>
feat: 新增 Discord Bot 斜線命令支援，並重構 LINE Bot 模組結構
</details>

***

## Summary

Add Discord Bot integration using discordgo library with WebSocket-based slash command handling (/gex, /help). Refactor LINE Bot internal module by splitting into separate files (webhook.go, send.go) and renaming handler method.
<details>
<summary>翻譯</summary>
新增 Discord Bot 整合，使用 discordgo 函式庫實作基於 WebSocket 的斜線命令處理（/gex、/help）。重構 LINE Bot 內部模組，拆分為獨立檔案（webhook.go、send.go）並重新命名 handler 方法。
</details>

## Changes

### FEAT
- Add Discord Bot with WebSocket session management and slash command handler
- Implement `/gex $<ticker>` command to query GEX data from database
- Implement `/help` command displaying available commands
- Add multiple reply methods: text, image file, image URL, and image reader
- Integrate godotenv for `.env` file loading at startup

<details>
<summary>翻譯</summary>

- 新增 Discord Bot，支援 WebSocket session 管理與斜線命令處理
- 實作 `/gex $<ticker>` 命令，從資料庫查詢 GEX 資料
- 實作 `/help` 命令，顯示可用指令
- 新增多種回覆方式：純文字、圖片檔案、圖片 URL、圖片 reader
- 整合 godotenv，於啟動時載入 `.env` 檔案

</details>

### UPDATE
- Modify `selectTicker.go` query to use `ORDER BY id DESC` instead of filtering by date
- Rename LINE Bot handler method from `LinebotSend` to `Send`

<details>
<summary>翻譯</summary>

- 修改 `selectTicker.go` 查詢，改用 `ORDER BY id DESC` 取代日期篩選
- 重新命名 LINE Bot handler 方法，由 `LinebotSend` 改為 `Send`

</details>

### REFACTOR
- Split LINE Bot module into separate files: `webhook.go` for webhook handling and `send.go` for message sending
- Remove old `lineSend.go` and `lineWebhook.go` files

<details>
<summary>翻譯</summary>

- 拆分 LINE Bot 模組為獨立檔案：`webhook.go` 處理 webhook，`send.go` 處理訊息發送
- 移除舊有的 `lineSend.go` 與 `lineWebhook.go` 檔案

</details>

### STYLE
- Standardize comment format with `* ` prefix for API endpoint documentation across Discord and Slack handlers

<details>
<summary>翻譯</summary>

- 統一註解格式，在 Discord 與 Slack handler 的 API 端點文件加上 `* ` 前綴

</details>

### CHORE
- Add `DISCORD_TOKEN` to `.env.example`
- Add dependencies: `github.com/bwmarrin/discordgo`, `github.com/gorilla/websocket`, `github.com/joho/godotenv`

<details>
<summary>翻譯</summary>

- 在 `.env.example` 新增 `DISCORD_TOKEN`
- 新增依賴：`github.com/bwmarrin/discordgo`、`github.com/gorilla/websocket`、`github.com/joho/godotenv`

</details>

***

## Files Changed

| File | Status | Tag |
|------|--------|-----|
| `internal/discord/bot.go` | Added | FEAT |
| `cmd/api/main.go` | Modified | FEAT |
| `internal/database/selectTicker.go` | Modified | UPDATE |
| `internal/linebot/webhook.go` | Added | REFACTOR |
| `internal/linebot/send.go` | Added | REFACTOR |
| `internal/linebot/lineSend.go` | Deleted | REFACTOR |
| `internal/linebot/lineWebhook.go` | Deleted | REFACTOR |
| `internal/discord/add.go` | Modified | STYLE |
| `internal/discord/delete.go` | Modified | STYLE |
| `internal/discord/discord.go` | Modified | STYLE |
| `internal/discord/send.go` | Modified | STYLE |
| `internal/slack/add.go` | Modified | STYLE |
| `internal/slack/delete.go` | Modified | STYLE |
| `internal/slack/send.go` | Modified | STYLE |
| `internal/slack/slack.go` | Modified | STYLE |
| `.env.example` | Modified | CHORE |
| `go.mod` | Modified | CHORE |
| `go.sum` | Modified | CHORE |

***

Generated by [Claude Code](https://gist.github.com/pardnchiu/cc619549138ccc7b57c073c314b7d0d8)
