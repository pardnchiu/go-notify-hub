# Update Log

> Generated: 2026-01-13 22:50
> v0.5.0

## Recommended Commit Message

feat: 新增 Slack webhook 支援並重構共用工具函式

feat: add Slack webhook support and refactor shared utilities

***

## Summary

新增 Slack webhook 整合功能，實作 Slack 訊息發送與頻道管理。重構檔案讀取與路徑處理相關的共用工具函式，從 Discord handler 中提取到 `utils` 套件，統一 Discord 和 Slack handler 的命名規範與全域變數管理方式。

## Changes

### FEAT
- 新增 Slack webhook 整合功能，包含 `internal/channel/slack.go` 與 `internal/handler/slack.go`
- 實作 Slack 訊息發送支援，包含豐富的訊息格式（attachment、fields、footer、圖片等）
- 實作 Slack 頻道列表查詢 API（`GET /slack/list`）

### REFACTOR
- 重構 Discord 全域變數命名，從 `channels` 改為 `discordChannels`，`channelsMu` 改為 `discordChannelsMu`
- 重構 Discord webhook 驗證正則表達式，從 `vaildWebhookURL` 改為 `vaildDiscordWebhook`
- 在 `utils` 套件中提取共用函式 `GetPath()` 和 `GetFile()`，用於統一檔案路徑處理與 JSON 讀取邏輯
- 使用 `maps.Copy()` 取代手動迴圈複製 map 的操作
- 簡化 Discord handler 初始化邏輯，使用新的 `utils.GetFile()` 函式

***

## Summary

Add Slack webhook integration with message sending and channel management capabilities. Refactor file reading and path handling utilities by extracting them from Discord handler into the `utils` package. Unify naming conventions and global variable management across Discord and Slack handlers.

## Changes

### FEAT
- Add Slack webhook integration with `internal/channel/slack.go` and `internal/handler/slack.go`
- Implement Slack message sending with rich formatting support (attachments, fields, footer, images)
- Implement Slack channel list API endpoint (`GET /slack/list`)

### REFACTOR
- Refactor Discord global variable naming from `channels` to `discordChannels`, `channelsMu` to `discordChannelsMu`
- Refactor Discord webhook validation regex from `vaildWebhookURL` to `vaildDiscordWebhook`
- Extract shared utilities `GetPath()` and `GetFile()` into `utils` package for unified file path handling and JSON reading
- Replace manual map copying loops with `maps.Copy()`
- Simplify Discord handler initialization by using new `utils.GetFile()` function

***

## Files Changed

| File | Status | Tag |
|------|--------|-----|
| `cmd/api/main.go` | Modified | FEAT |
| `internal/handler/discord.go` | Modified | REFACTOR |
| `internal/handler/discordAdd.go` | Modified | REFACTOR |
| `internal/handler/discordDelete.go` | Modified | REFACTOR |
| `internal/handler/discordSend.go` | Modified | REFACTOR |
| `internal/utils/utils.go` | Modified | REFACTOR |
| `internal/channel/slack.go` | Added | FEAT |
| `internal/handler/slack.go` | Added | FEAT |

***

Generated by [Claude Code](https://gist.github.com/pardnchiu/cc619549138ccc7b57c073c314b7d0d8)
