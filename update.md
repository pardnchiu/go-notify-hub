# Update Log

> Generated: 2026-01-14 00:53
> v0.5.0 → v0.6.0

## Recommended Commit Message

feat: 完善 Slack webhook API 端點並優化 Discord handler

feat: complete Slack webhook API endpoints and optimize Discord handlers

***

## Summary

新增 Slack webhook 的發送、註冊與刪除 API 端點，完整實作 Slack 頻道管理功能。優化 Discord handler 的檔案讀取邏輯，統一使用 `utils.GetPath()` 工具函式，並改善錯誤處理機制。

## Changes

### FEAT
- 新增 Slack 訊息發送 API 端點（`POST /slack/:channelName`）
- 新增 Slack 頻道註冊 API 端點（`POST /slack/add`）
- 新增 Slack 頻道刪除 API 端點（`DELETE /slack/:channelName`）
- 實作 `slackAdd.go`、`slackDelete.go`、`slackSend.go` handler 功能

### REFACTOR
- 優化 `discordAdd.go` 檔案路徑處理，改用 `utils.GetPath()` 統一管理
- 優化 `discordSend.go` 移除重複的檔案讀取邏輯，改為提前返回錯誤
- 改善 Discord handler 的 defer 使用時機與錯誤處理流程
- 簡化 map 複製與檔案寫入邏輯

### UPDATE
- 在 `slack.go` 中新增 `validSlackWebhook` 正則表達式，用於驗證 Slack webhook URL 格式

***

## Summary

Add Slack webhook Send, Add, and Delete API endpoints to complete Slack channel management features. Optimize Discord handler file reading logic by using unified `utils.GetPath()` utility function and improve error handling mechanisms.

## Changes

### FEAT
- Add Slack message sending API endpoint (`POST /slack/:channelName`)
- Add Slack channel registration API endpoint (`POST /slack/add`)
- Add Slack channel deletion API endpoint (`DELETE /slack/:channelName`)
- Implement `slackAdd.go`, `slackDelete.go`, `slackSend.go` handler functions

### REFACTOR
- Optimize `discordAdd.go` file path handling using unified `utils.GetPath()`
- Optimize `discordSend.go` by removing duplicate file reading logic and returning errors early
- Improve defer placement and error handling flow in Discord handlers
- Simplify map copying and file writing logic

### UPDATE
- Add `validSlackWebhook` regex pattern in `slack.go` for Slack webhook URL validation

***

## Files Changed

| File | Status | Tag |
|------|--------|-----|
| `cmd/api/main.go` | Modified | FEAT |
| `internal/handler/discordAdd.go` | Modified | REFACTOR |
| `internal/handler/discordSend.go` | Modified | REFACTOR |
| `internal/handler/slack.go` | Modified | UPDATE |
| `internal/handler/slackAdd.go` | Added | FEAT |
| `internal/handler/slackDelete.go` | Added | FEAT |
| `internal/handler/slackSend.go` | Added | FEAT |

***

Generated by [Claude Code](https://gist.github.com/pardnchiu/cc619549138ccc7b57c073c314b7d0d8)
