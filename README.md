> [!NOTE]
> This README was generated by Claude Code, get the ZH version from [here](./README.zh.md).

# go-notification-bot

[![Go](https://img.shields.io/badge/Go-1.25.1-00ADD8?logo=go&logoColor=white)](https://go.dev)
[![Gin](https://img.shields.io/badge/Gin-1.11.0-00ADD8)](https://gin-gonic.com)

> Multi-channel notification service integrating Discord, Slack, and LINE Bot with a unified REST API for message delivery and webhook management.

## Features

- **Multi-platform Support**: Integrates Discord Webhook, Slack Webhook, and LINE Bot Messaging API
- **Unified API**: Manage all notification channels through REST API
- **Webhook Management**: Add, delete, and list channel configurations
- **LINE Bot Commands**: Custom command parsing support (e.g., `/gex $TICKER`)
- **PostgreSQL Integration**: User management and data persistence

## Architecture

```mermaid
graph TB
    subgraph Client
        A[HTTP Request]
    end

    subgraph API["Gin Server :8080"]
        B[Router]
        B --> C[Discord Handler]
        B --> D[Slack Handler]
        B --> E[LINE Bot Handler]
    end

    subgraph Storage
        F[(PostgreSQL)]
        G[JSON Files]
    end

    subgraph External["External Services"]
        H[Discord Webhook]
        I[Slack Webhook]
        J[LINE Messaging API]
    end

    A --> B
    C --> G
    C --> H
    D --> G
    D --> I
    E --> F
    E --> J
```

### Directory Structure

```
go-notification-bot/
├── cmd/api/           # Application entry point
├── internal/
│   ├── channel/       # Message sending logic (Discord, Slack)
│   ├── database/      # PostgreSQL database operations
│   ├── discord/       # Discord handler
│   ├── linebot/       # LINE Bot handler
│   ├── slack/         # Slack handler
│   └── utils/         # Shared utility functions
└── json/              # Channel configuration storage
```

### Request Flow

```mermaid
sequenceDiagram
    participant C as Client
    participant G as Gin Router
    participant H as Handler
    participant S as Storage
    participant E as External Service

    C->>G: HTTP Request
    G->>H: Route to Handler
    H->>S: Read/Write Config
    H->>E: Send Notification
    E-->>H: Response
    H-->>C: JSON Response
```

## Installation

```bash
git clone https://github.com/pardnchiu/go-notification-bot.git
cd bot
go mod download
```

## Configuration

Create a `.env` file:

```env
LINEBOT_SECRET=your_line_bot_secret
LINEBOT_TOKEN=your_line_bot_token
DATABASE_URL=postgres://user:password@localhost:5432/dbname
```

## Running

```bash
go run cmd/api/main.go
```

Or using Docker:

```bash
docker-compose up
```

## API Endpoints

### Discord

| Method | Path | Description |
|--------|------|-------------|
| GET | `/discord/list` | List all registered Discord channels |
| POST | `/discord/add` | Add Discord Webhook channel |
| DELETE | `/discord/delete/:channelName` | Delete specified channel |
| POST | `/discord/send/:channelName` | Send message to specified channel |

### Slack

| Method | Path | Description |
|--------|------|-------------|
| GET | `/slack/list` | List all registered Slack channels |
| POST | `/slack/add` | Add Slack Webhook channel |
| DELETE | `/slack/delete/:channelName` | Delete specified channel |
| POST | `/slack/send/:channelName` | Send message to specified channel |

### LINE Bot

| Method | Path | Description |
|--------|------|-------------|
| POST | `/linebot/webhook` | LINE Bot Webhook endpoint |
| POST | `/linebot/send/all` | Broadcast message to all subscribers |

## Usage Examples

### Add Discord Channel

```bash
curl -X POST http://localhost:8080/discord/add \
  -H "Content-Type: application/json" \
  -d '{
    "datas": [{
      "name": "general",
      "webhook": "https://discord.com/api/webhooks/..."
    }]
  }'
```

### Send Discord Message

```bash
curl -X POST http://localhost:8080/discord/send/general \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Notification Title",
    "description": "Message content"
  }'
```

### LINE Bot Broadcast

```bash
curl -X POST http://localhost:8080/linebot/send/all \
  -H "Content-Type: application/json" \
  -d '{
    "text": "Hello, World!",
    "image": "https://example.com/image.png",
    "image_preview": "https://example.com/image_preview.png"
  }'
```

## License

This is a private project.

## Author

<img src="https://avatars.githubusercontent.com/u/25631760" align="left" width="96" height="96" style="margin-right: 0.5rem;">

<h4 style="padding-top: 0">邱敬幃 Pardn Chiu</h4>

<a href="mailto:dev@pardn.io" target="_blank">
<img src="https://pardn.io/image/email.svg" width="48" height="48">
</a> <a href="https://linkedin.com/in/pardnchiu" target="_blank">
<img src="https://pardn.io/image/linkedin.svg" width="48" height="48">
</a>

***

©️ 2026 [邱敬幃 Pardn Chiu](https://linkedin.com/in/pardnchiu)
